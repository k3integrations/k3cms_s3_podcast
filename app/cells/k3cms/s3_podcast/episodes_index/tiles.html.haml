-# Compare: app/cells/k3cms/s3_podcast/episodes_index/list.html.haml app/cells/k3cms/s3_podcast/episodes_index/tiles.html.haml

.k3cms_s3_podcast.episode_list
  .header
    %div
      = #paginate @episodes

    - if can?(:create, K3cms::S3Podcast::Episode) && edit_mode?
      %div
        = link_to_function image_tag('k3cms/s3_podcast/add.png', :alt => 'New') + ' New episode',
          "$('.k3cms_s3_podcast_episode#new_k3cms_s3_podcast_episode:eq(0)').trigger('toggle')"

  .the_list
    - if can?(:create, K3cms::S3Podcast::Episode) && edit_mode?
      = render_cell 'k3cms/s3_podcast/episodes_index', :tile, :episode => @new_episode, :podcast => @podcast, :style => 'tiles'

    - @episodes.in_groups_of(Rails.application.config.k3cms_s3_podcast_pagination[:per_row], false).each do |episodes|
      - episodes.each do |episode|
        = render_cell 'k3cms/s3_podcast/episodes_index', :tile, :episode => episode, :podcast => @podcast, :style => 'tiles'

:javascript
  K3cms_S3Podcast.fix_clears()

- if ::Rails.application.config.k3cms_s3_show_view == :lightbox
  :javascript
    $(function() {
      $("a[rel]").overlay({
        mask: '#000',
        effect: 'apple',
        onBeforeLoad: function() {
          var wrap = this.getOverlay().find(".s3podcastWrap");
          wrap.load(this.getTrigger().attr("href"));
        }
      });
    });

.s3_podcast_overlay#s3_overlay
  .contentWrap
